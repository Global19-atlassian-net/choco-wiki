# Setting up QDE to be Accessible over the Internet

## Firewall Setup

https://chocolatey.org/docs/quick-deployment-firewall-changes

Nexus Web / API - Port 8443
CCM Web - Port 443
Jenkins - 8080
CCM Service - 24020
SSL Certificate Setup

[There is already a document on SSL setup at https://chocolatey.org/docs/quick-deployment-ssl-setup, but it’s not very descriptive. Also, the “C:\choco-setup\files\New-SslCertificates.ps1” script referenced in that document does not currently work properly in all SSL scenarios.]

3 Scenarios for SSL Certificates:
Self-Signed certs generated by New-SslCertificates.ps1 script
Domain certificate for FQDN of server
Web SSL certificate purchased from an external CA (different FQDN)


## Nexus Setup

By default, you can check a box to allow “Anonymous” access when initially setting up Nexus. This is good initially, but will need to be changed if planning to expose it over the Internet.

As well, exposing Nexus to the Web means having to secure all the different parts of it:
SSL Certificate for HTTPS URI
Create a Role for ChocoUser Access
Create a ChocoUser and add to above role
Place credential in all “choco source add” commands
Allow passing of the credential as variable/parameter to all client setup scripts

Both the following scripts on the “choco-install” raw repository will need to be modified:
ChocolateyInstall.ps1
ClientSetup.ps1

See below.

## CCM Setup

Considerations:
Upgrade CCM packages to 0.3.0 if planning to use Deployments
https://chocolatey.org/docs/central-management-setup-client#config-settings
centralManagementServiceCommunicationSaltAdditivePassword
centralManagementClientCommunicationSaltAdditivePassword

## Adjusting Scripts for Client Setup

Both the following scripts on the “choco-install” raw repository will need to be modified:
ChocolateyInstall.ps1
ClientSetup.ps1

Considerations:
User credential when connecting to other repo’s will need to be passed
Salt additive for server and client will need to be added, if checking into CCM
Both the above will need to be turned into variables/parameters that can be passed at runtime, so that the credentials themselves don’t need to live in these files
CCM Deployments opt-in will need to be done, if CCM has been upgraded

## Jenkins?

Jenkins is currently accessible over HTTP. Do we tell users to just use this only on the QDE server itself, and not expose it to the web at all? Is there a security concern with this?
